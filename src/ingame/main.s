{
*=0x01DB61
    .dw 0x0000, 0x1A16 ; fenètre principale
    .dw 0x05EE, 0x0307 ; fenètre Gils
    .dw 0x04EE, 0x0207 ; fenetre temps
    .dw 0x002E, 0x1107 ; fenètre menu principal

*=0x01892E
    load_system_menu_text_pointer(in_game_menu.menu)
    ; jsr.w draw_window_and_vwf_message

; Gils
*=0x0187CE
    load_system_menu_text_pointer(in_game_menu.gils)

; moves gils two chars on the right
*=0x0187DA
    ldy.w #0x062A + 4

; TIME
*=0x0187C5
    ldx.w #0x52E + 2
    load_system_menu_text_pointer(in_game_menu.time)

; disable Save text
*=0x018939
    jmp.l disable_save

; Moves the classes on the next line
*=0x018C1A
   adc.w #0x0040

;*=0x0188d0
;    ldx.w #0x02CE


*=0x018FD3
    jsr.l load_classes_pointer
    nop
    sta 0x45
    xba
    sta 0x46
    ldx 0x45
    lda #0x0F

*=0x018fe3
{
load_next_char:
    lda.l assets_classes_dat, x
    beq end
    ; dakuten
	nop
	nop
	nop
    ;jsr.w 0x8E32
	nop
	nop
	nop
   ; sta.w 0x0000, y
    ;xba
    sta.w 0x0040, y
    iny
    lda.b 0x34
	nop
	nop
	nop
    ;sta.w 0x0000, y
    sta.w 0x0040, y
    inx
    iny

    bra load_next_char
end:
    rts
}

*=0x0189b9
; Level offset
    adc.w #0x0044

*=0x018a03
draw_hp_mp = 0x018a2a
        lda.w     #0x0046 + 0x40
        ldy.w     #0x0007      ; current hp
        jsr.w     draw_hp_mp
        lda.w     #0x0050 + 0x40
        ldy.w     #0x0009      ; max hp
        jsr.w     draw_hp_mp
        lda.w     #0x0086 + 0x40
        ldy.w     #0x000b      ; current mp
        jsr.w     draw_hp_mp
        lda.w     #0x0090 + 0x40
        ldy.w     #0x000d      ; max mp
        jsr.w     draw_hp_mp

; LEVEL
*=0x0189C3
{
    level_offset = 7 * 2
    lda #0xFF
    sta.w 0+level_offset, x
    lda #0x4F ; N
    sta.w 2+level_offset, x
    lda #0x57 ; V
    sta.w 4+level_offset, x
    lda #0xFF ; V
    sta.w 6+level_offset, x
    nop

    lda #0x57              ; H 49 V 57
    sta.w 0x40 + 2 + 0x40,X
    lda #0x51              ; P
    sta.w 0x42 - 2 + 0x40,X
    sta.w 0x82 -2 + 0x40 ,X
    lda #0x4E              ; M
    sta.w 0x80 + 2 + 0x40,X
    lda #0xC7              ; /
    sta.w 0x4E + 0x40,X
    sta.w 0x8E + 0x40,X
}

; Moves the level down in the digest
*=0x0189FA
    sta.w 0x0016,X
    xba
    sta.w 0x0018,X

;; Move character name.
*=0x0183D5
	sta.w 0x0000, y
	xba
	sta.w 0x0040, y

;*=0x018b6b
;  lda     #0x42



; Time offset
*=0x018BC1
    lda.b #0x80
    STA.W 0x0578,Y
    XBA
    STA.W 0x057A,Y
    REP #0x20
    LDA.B 0x73
    SEP #0x20
    JSR.W 0x81D6
    LDA.B 0x5B
    STA.W 0x0570,Y
    LDA.B 0x5D
    STA.W 0x0572,Y
    LDA.B 0x5E
    STA.W 0x0574,Y
    LDA.B #0xC8
    STA.W 0x0576,Y
}

; main menu spells

; length of spells names
*=0x01B345
    lda.b #0x07

; compute spell pointer
;01b319 rep #0x20
;01b31b asl a
;01b31c sta 0x45
;01b31e asl a
;01b31f adc 0x45
;01b321 adc #0x8900
;01b324 tay
;01b325 sep #0x20
;01b327 lda #0x0f

*=0x01b319
    rep #0x20
    asl
    asl
    asl
    nop
    nop
    nop
    adc.w #assets_magic_dat
    tay
    sep #0x20
    lda.b #assets_magic_dat >> 16


; save 0x200 more data from field to properly handle render buffer 0x200.
; There's a buffer nearby we'll probably use an aditional buffer
;*=0x14ff90
;    ldx.w #0x1000 + render.buffer_size
;*=0x14ffeb
;    ldx.w #0x1000 + render.buffer_size

; patches the save vram function to save the 0x200 extra vram used by small vwf
*=0x01873a
 	jsr.l     vram_copy.save_dialog_vram_far
	rts

; patches the restore vram function to restore the 0x200 saved to the cartdrige ram
*=0x01873f
	phb
	jsr.l     vram_copy.restore_dialog_gfx_far



;*=0x1efe1f
;	.dw 0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff	;0x0
;	.dw 0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff	;0x1
;	.dw 0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff	;0x2
;	.dw 0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff	;0x3
;	.dw 0xff00,0xff00,0x4200,0x4300,0x4400,0x4500,0x4600,0x4700,0x4800,0x4900,0x4A00,0x4B00,0x4C00,0x4D00,0x4E00,0x4F00	;0x4
;	.dw 0x5000,0x5100,0x5200,0x5300,0x5400,0x5500,0x5600,0x5700,0x5800,0x5900,0x5A00,0x5B00,0x5C00,0x5D00,0x5E00,0x5F00	;0x5
;	.dw 0x6000,0x6100,0x6200,0x6300,0x6400,0x6500,0x6600,0x6700,0x6800,0x6900,0x6A00,0x6B00,0x6C00,0x6D00,0x6E00,0x6F00	;0x6
;	.dw 0x7000,0x7100,0x7200,0x7300,0x7400,0x7500,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff	;0x7
;	.dw 0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff	;0x8
;	.dw 0x608C,0x608D,0x608E,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff	;0x9
;	.dw 0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff	;0xA
;	.dw 0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff	;0xB
;	.dw 0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff	;0xC
;	.dw 0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff	;0xD
;	.dw 0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff	;0xE
;	.dw 0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xffff,0xff00	;0xF


